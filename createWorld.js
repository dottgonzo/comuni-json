"use strict";
var fs = require("fs");
var _ = require("lodash");
var Comuni = require("./comuni.json");
var Regioni = require("./regioni.json");
var countries = require("countryjs");
var Countries = countries.all();
var all = Countries;
var tests = [all[0], all[1]];
var use = all;
var Geobuilds = [];
var continents = [];
var continent_exists = false;
var subcontinent_exists = false;
var country_exists = false;
_.map(use, function (countryjs) {
    continent_exists = false;
    var Capital;
    var Country = { tz: "", capital: Capital, latlng: countryjs.latlng, nativeName: countryjs.nativeName, name: countryjs.name, states: [], boundaries: [], currencies: countryjs.currencies, isoLang: countryjs.languages };
    if (Country.name === "Italy") {
        _.map(Regioni, function (p) {
            _.map(p.cities, function (t) {
                if (t.nativeName === "Roma") {
                    console.log("Roma");
                    Country.states.push({
                        name: "Italy",
                        nativeName: "Italia",
                        latlng: Country.latlng,
                        regions: Regioni,
                        boundaries: [],
                        capital: t,
                        isoLang: Country.isoLang,
                        tz: Country.tz
                    });
                }
            });
        });
    }
    var Subcontinent = { name: countryjs.subregion, countries: [Country], boundaries: [] };
    var Continent = { name: countryjs.region, subcontinents: [Subcontinent], boundaries: [] };
    _.map(continents, function (continent) {
        subcontinent_exists = false;
        if (continent.name === Continent.name) {
            continent_exists = true;
            _.map(continent.subcontinents, function (subcontinent) {
                if (subcontinent.name === Subcontinent.name) {
                    subcontinent_exists = true;
                    country_exists = false;
                    _.map(subcontinent.countries, function (country) {
                        if (country.name === Country.name) {
                            country_exists = true;
                        }
                    });
                    if (!country_exists) {
                        console.log("country");
                        subcontinent.countries.push(Country);
                    }
                }
            });
            if (!subcontinent_exists) {
                console.log("subcontinent_exists");
                continent.subcontinents.push(Subcontinent);
            }
        }
    });
    if (!continent_exists) {
        continents.push(Continent);
        console.log("subcontinent_exists");
    }
});
fs.writeFile("./world.json", JSON.stringify(continents), { encoding: "utf-8" }, function (err) {
    if (err) {
        console.log(err);
    }
    else {
    }
});

//# sourceMappingURL=data:application/json;base64,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QyxDQUFBO0lBR0YsRUFBRSxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7UUFFcEIsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUMxQixPQUFPLENBQUMsR0FBRyxDQUFDLHFCQUFxQixDQUFDLENBQUE7SUFFdEMsQ0FBQztBQUdMLENBQUMsQ0FBQyxDQUFBO0FBR0YsRUFBRSxDQUFDLFNBQVMsQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsRUFBRSxVQUFVLEdBQUc7SUFDekYsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNOLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDcEIsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO0lBQ1IsQ0FBQztBQUVMLENBQUMsQ0FBQyxDQUFBIiwiZmlsZSI6ImNyZWF0ZVdvcmxkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5cblxuXG5cbmltcG9ydCAqIGFzIGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0ICogYXMgYXN5bmMgZnJvbSBcImFzeW5jXCI7XG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcblxubGV0IENvbXVuaTogSUNvbXVuZVtdID0gcmVxdWlyZShcIi4vY29tdW5pLmpzb25cIik7XG5cbmxldCBSZWdpb25pOiBJR2VvY29kZXNbXSA9IHJlcXVpcmUoXCIuL3JlZ2lvbmkuanNvblwiKTtcblxubGV0IGNvdW50cmllcyA9IHJlcXVpcmUoXCJjb3VudHJ5anNcIik7XG5cbmxldCBDb3VudHJpZXM6IElDb3VudHJ5anNbXSA9IGNvdW50cmllcy5hbGwoKTtcblxuXG5cblxuaW50ZXJmYWNlIElHZW9jb2RlcyB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHByb3ZpbmNlczogSUdlb1tdO1xuICAgIGNpdGllczogSUNpdHlbXVxufVxuXG5cblxuaW50ZXJmYWNlIElDaXR5IHtcbiAgICBuYXRpdmVOYW1lOiBzdHJpbmc7XG4gICAgbGF0aXR1ZGU6IG51bWJlcjtcbiAgICBsb25naXR1ZGU6IG51bWJlcjtcbiAgICB6aXBjb2RlOiBudW1iZXI7XG4gICAgY2l0eUNvZGU6IHN0cmluZztcbiAgICBzdGF0ZTogc3RyaW5nO1xuICAgIGNvdW50cnk6IHN0cmluZztcbiAgICBpc29MYW5nOiBzdHJpbmc7XG4gICAgdHo6IHN0cmluZztcbiAgICBjdXJyZW5jeTogc3RyaW5nO1xuICAgIGN1cnJlbmN5U3ltYm9sOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBJR2VvIHtcbiAgICBuYXRpdmVOYW1lOiBzdHJpbmc7XG4gICAgemlwY29kZTogc3RyaW5nO1xuICAgIGNpdGllczogSUNpdHlbXTtcbiAgICBtYWluOiBJQ2l0eTtcbiAgICBsYXRpdHVkZTogbnVtYmVyO1xuICAgIGxvbmdpdHVkZTogbnVtYmVyO1xuXG59XG5cbmludGVyZmFjZSBJQ29tdW5lIHtcbiAgICBub21lOiBzdHJpbmc7XG4gICAgY29kaWNlOiBudW1iZXI7XG4gICAgbGF0aXR1ZGU6IG51bWJlcjtcbiAgICBsb25naXR1ZGU6IG51bWJlcjtcbiAgICB6b25hOiB7XG4gICAgICAgIG5vbWU6IHN0cmluZztcbiAgICAgICAgY29kaWNlOiBudW1iZXI7XG4gICAgfSxcbiAgICByZWdpb25lOiB7XG4gICAgICAgIGNvZGljZTogbnVtYmVyO1xuICAgICAgICBub21lOiBzdHJpbmc7XG4gICAgfSxcbiAgICBjbToge1xuICAgICAgICBjb2RpY2U6IHN0cmluZztcbiAgICAgICAgbm9tZTogc3RyaW5nO1xuICAgIH0sXG4gICAgcHJvdmluY2lhOiB7XG4gICAgICAgIGNvZGljZTogbnVtYmVyO1xuICAgICAgICBub21lOiBzdHJpbmc7XG4gICAgfSxcbiAgICBzaWdsYTogc3RyaW5nO1xuICAgIGNvZGljZUNhdGFzdGFsZTogc3RyaW5nO1xuICAgIGNhcDogbnVtYmVyO1xuICAgIHN0YXRlOiBzdHJpbmc7XG4gICAgY291bnRyeTogc3RyaW5nO1xuICAgIHppcGNvZGU6IHN0cmluZztcblxufVxuXG5pbnRlcmZhY2UgSUJvdW5kYXJ5IHtcblxuICAgIGxhdGl0dWRlOiBudW1iZXI7XG4gICAgbG9uZ2l0dWRlOiBudW1iZXI7XG5cbn1cblxuaW50ZXJmYWNlIElnZW9KU09OZmVhdHVyZXMge1xuICAgIFwidHlwZVwiOiBzdHJpbmc7XG4gICAgXCJpZFwiOiBzdHJpbmc7XG4gICAgXCJwcm9wZXJ0aWVzXCI6IHtcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgIH0sXG4gICAgXCJnZW9tZXRyeVwiOiB7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgY29vcmRpbmF0ZXM6IFtcbiAgICAgICAgICAgIG51bWJlcltdW11cbiAgICAgICAgXVxuICAgIH1cbn1cblxuaW50ZXJmYWNlIElDb3VudHJ5anMge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBhbHRTcGVsbGluZ3M6IHN0cmluZ1tdO1xuICAgIGFyZWE6IG51bWJlcjtcbiAgICBcImJvcmRlcnNcIjogc3RyaW5nW107XG4gICAgY2FsbGluZ0NvZGVzOiBzdHJpbmdbXTtcbiAgICBjYXBpdGFsOiBzdHJpbmc7XG4gICAgY3VycmVuY2llczogc3RyaW5nW107XG4gICAgZGVtb255bTogc3RyaW5nO1xuICAgIGZsYWc6IHN0cmluZztcbiAgICBnZW9KU09OOiB7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgZmVhdHVyZXM6IElnZW9KU09OZmVhdHVyZXNbXTtcbiAgICB9O1xuICAgIElTTzoge1xuICAgICAgICAyOiBzdHJpbmc7XG4gICAgICAgIDM6IHN0cmluZztcbiAgICAgICAgYWxwaGEyOiBzdHJpbmc7XG4gICAgICAgIGFscGhhMzogc3RyaW5nO1xuICAgIH07XG4gICAgbGFuZ3VhZ2VzOiBzdHJpbmdbXTtcbiAgICBsYXRsbmc6IG51bWJlcltdO1xuICAgIG5hdGl2ZU5hbWU6IHN0cmluZztcbiAgICBwb3B1bGF0aW9uOiBudW1iZXI7XG4gICAgcHJvdmluY2VzOiBzdHJpbmdbXTtcbiAgICByZWdpb246IHN0cmluZztcbiAgICBzdWJyZWdpb246IHN0cmluZztcbiAgICB0aW1lem9uZXM6IHN0cmluZ1tdO1xuICAgIFwidGxkXCI6IHN0cmluZ1tdO1xuICAgIFwidHJhbnNsYXRpb25zXCI6IHtcbiAgICAgICAgZGU6IHN0cmluZztcbiAgICAgICAgZXM6IHN0cmluZztcbiAgICAgICAgZnI6IHN0cmluZztcbiAgICAgICAgamE6IHN0cmluZztcbiAgICAgICAgaXQ6IHN0cmluZztcbiAgICB9O1xuICAgIHdpa2k6IHN0cmluZztcbn1cblxuXG5jb25zdCBhbGwgPSBDb3VudHJpZXM7XG5jb25zdCB0ZXN0cyA9IFthbGxbMF0sIGFsbFsxXV07XG5cbmNvbnN0IHVzZSA9IGFsbDtcblxuaW50ZXJmYWNlIElzdGF0ZSB7XG4gICAgcmVnaW9uczogSUdlb2NvZGVzW107XG4gICAgYm91bmRhcmllczogSUJvdW5kYXJ5W107XG4gICAgY2FwaXRhbDogSUNpdHk7XG4gICAgbmF0aXZlTmFtZTogc3RyaW5nO1xuICAgIGxhdGxuZzogbnVtYmVyW107XG4gICAgaXNvTGFuZzogc3RyaW5nW107XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHR6OiBzdHJpbmc7XG5cbn1cblxuaW50ZXJmYWNlIElDb3VudHJ5IHtcbiAgICBzdGF0ZXM6IElzdGF0ZVtdO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBib3VuZGFyaWVzOiBJQm91bmRhcnlbXTtcbiAgICBuYXRpdmVOYW1lOiBzdHJpbmc7XG4gICAgY2FwaXRhbDogSUNpdHk7XG4gICAgY3VycmVuY2llczogc3RyaW5nW107XG4gICAgaXNvTGFuZzogc3RyaW5nW107XG4gICAgbGF0bG5nOiBudW1iZXJbXTtcbiAgICB0ejogc3RyaW5nO1xuXG59XG5cbmludGVyZmFjZSBJU3ViY29udGluZW50IHtcblxuICAgIG5hbWU6IHN0cmluZztcbiAgICBjb3VudHJpZXM6IElDb3VudHJ5W107XG4gICAgYm91bmRhcmllczogSUJvdW5kYXJ5W107XG59XG5cbmludGVyZmFjZSBJR2VvYnVpbGQge1xuXG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHN1YmNvbnRpbmVudHM6IElTdWJjb250aW5lbnRbXTtcbiAgICBib3VuZGFyaWVzOiBJQm91bmRhcnlbXTtcblxufVxuXG5cblxuY29uc3QgR2VvYnVpbGRzOiBJR2VvYnVpbGRbXSA9IFtdO1xuXG5cblxuY29uc3QgY29udGluZW50czogSUdlb2J1aWxkW10gPSBbXVxuXG5cbmxldCBjb250aW5lbnRfZXhpc3RzID0gZmFsc2U7XG5sZXQgc3ViY29udGluZW50X2V4aXN0cyA9IGZhbHNlO1xubGV0IGNvdW50cnlfZXhpc3RzID0gZmFsc2U7XG5cblxuXy5tYXAodXNlLCBmdW5jdGlvbiAoY291bnRyeWpzKSB7XG5cblxuICAgIGNvbnRpbmVudF9leGlzdHMgPSBmYWxzZTtcblxuXG4gICAgbGV0IENhcGl0YWw6IElDaXR5O1xuICAgIGxldCBDb3VudHJ5OiBJQ291bnRyeSA9IHsgdHo6IFwiXCIsIGNhcGl0YWw6IENhcGl0YWwsIGxhdGxuZzogY291bnRyeWpzLmxhdGxuZywgbmF0aXZlTmFtZTogY291bnRyeWpzLm5hdGl2ZU5hbWUsIG5hbWU6IGNvdW50cnlqcy5uYW1lLCBzdGF0ZXM6IFtdLCBib3VuZGFyaWVzOiBbXSwgY3VycmVuY2llczogY291bnRyeWpzLmN1cnJlbmNpZXMsIGlzb0xhbmc6IGNvdW50cnlqcy5sYW5ndWFnZXMgfVxuICAgIGlmIChDb3VudHJ5Lm5hbWUgPT09IFwiSXRhbHlcIikge1xuICAgICAgICBfLm1hcChSZWdpb25pLCBmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgXy5tYXAocC5jaXRpZXMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHQubmF0aXZlTmFtZSA9PT0gXCJSb21hXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSb21hXCIpXG5cbiAgICAgICAgICAgICAgICAgICAgQ291bnRyeS5zdGF0ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkl0YWx5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVOYW1lOiBcIkl0YWxpYVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF0bG5nOiBDb3VudHJ5LmxhdGxuZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbnM6IFJlZ2lvbmksXG4gICAgICAgICAgICAgICAgICAgICAgICBib3VuZGFyaWVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcGl0YWw6IHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc29MYW5nOiBDb3VudHJ5Lmlzb0xhbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ejogQ291bnRyeS50elxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuICAgIGxldCBTdWJjb250aW5lbnQ6IElTdWJjb250aW5lbnQgPSB7IG5hbWU6IGNvdW50cnlqcy5zdWJyZWdpb24sIGNvdW50cmllczogW0NvdW50cnldLCBib3VuZGFyaWVzOiBbXSB9XG5cbiAgICBsZXQgQ29udGluZW50OiBJR2VvYnVpbGQgPSB7IG5hbWU6IGNvdW50cnlqcy5yZWdpb24sIHN1YmNvbnRpbmVudHM6IFtTdWJjb250aW5lbnRdLCBib3VuZGFyaWVzOiBbXSB9XG5cblxuICAgIF8ubWFwKGNvbnRpbmVudHMsIGZ1bmN0aW9uIChjb250aW5lbnQpIHtcblxuICAgICAgICBzdWJjb250aW5lbnRfZXhpc3RzID0gZmFsc2U7XG5cblxuICAgICAgICBpZiAoY29udGluZW50Lm5hbWUgPT09IENvbnRpbmVudC5uYW1lKSB7XG4gICAgICAgICAgICBjb250aW5lbnRfZXhpc3RzID0gdHJ1ZTtcbiAgICAgICAgICAgIF8ubWFwKGNvbnRpbmVudC5zdWJjb250aW5lbnRzLCBmdW5jdGlvbiAoc3ViY29udGluZW50KSB7XG5cblxuICAgICAgICAgICAgICAgIGlmIChzdWJjb250aW5lbnQubmFtZSA9PT0gU3ViY29udGluZW50Lm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViY29udGluZW50X2V4aXN0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlfZXhpc3RzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIF8ubWFwKHN1YmNvbnRpbmVudC5jb3VudHJpZXMsIGZ1bmN0aW9uIChjb3VudHJ5KSB7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50cnkubmFtZSA9PT0gQ291bnRyeS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeV9leGlzdHMgPSB0cnVlO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvdW50cnlfZXhpc3RzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY291bnRyeVwiKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJjb250aW5lbnQuY291bnRyaWVzLnB1c2goQ291bnRyeSlcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKCFzdWJjb250aW5lbnRfZXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdWJjb250aW5lbnRfZXhpc3RzXCIpXG5cbiAgICAgICAgICAgICAgICBjb250aW5lbnQuc3ViY29udGluZW50cy5wdXNoKFN1YmNvbnRpbmVudClcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cblxuICAgIH0pXG5cblxuICAgIGlmICghY29udGluZW50X2V4aXN0cykge1xuXG4gICAgICAgIGNvbnRpbmVudHMucHVzaChDb250aW5lbnQpXG4gICAgICAgIGNvbnNvbGUubG9nKFwic3ViY29udGluZW50X2V4aXN0c1wiKVxuXG4gICAgfVxuXG5cbn0pXG5cblxuZnMud3JpdGVGaWxlKFwiLi93b3JsZC5qc29uXCIsIEpTT04uc3RyaW5naWZ5KGNvbnRpbmVudHMpLCB7IGVuY29kaW5nOiBcInV0Zi04XCIgfSwgZnVuY3Rpb24gKGVycikge1xuICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgIH0gZWxzZSB7XG4gICAgfVxuXG59KSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
